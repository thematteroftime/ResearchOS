# merge_project ????

## ????

??**merge_project** ??????????????????`ModuleNotFoundError: dotenv/httpx` ????

```bash
pip install -r requirements.txt
```

## ??

- ?? `backend/*.py` ?? `tests/test_<????.py`????????**?? API** ??????????
- ????????*??????????**???????????????prompt?????????????????
- ??????????? **`tests/logs/`**????????????bug ????

## ????????

| ???? | ????backend ?? | ?? |
|----------|---------------------|------|
| test_utils.py | - | DebugLogger????print + ????|
| test_config.py | config.py | ???get_env?VENUE_FORMATS?PROJECT_TYPES |
| test_agent_config.py | agent_config.py | load_scenarios?get_task_config?get_prompt?get_memorize_override_config?intent_to_agent_ids?list_agent_ids |
| test_memu_client_api.py | memu_client.py | ????get_retrieve_config?upload_files?list_records?get_download_info?download_to_path?match_and_resolve?insert_record?delete_record |
| test_memu_oss_client_unit.py | memu_oss_client.py, memu_client.py | OSS ??key ????memorize/retrieve ?? error?create_memu_client(backend=oss) ?? MemUClient |
| test_paper_ingest.py | paper_ingest.py | extract_paper_structure?? PDF??paper_ingest_pdf????????PDF??|
| test_pdf_extract.py | pdf_extract.py | extract_raw_with_pymupdf????????PDF/?? PDF??verify_formulas_with_llm |
| test_parameter_recommendation.py | parameter_recommendation.py, app_backend.py | app_backend._get_memory_context_for_agents?run_parameter_recommendation?memory_context ??app_backend ????|
| test_scientific_writer_client.py | scientific_writer_client.py | ensure_env?normalize_query?list_jobs?get_job_status |
| test_app_backend_api.py | app_backend.py | ensure_env?get_venue_formats?get_project_types?normalize_query?intent_to_agent_ids?list_agent_ids?get_agent_task_config?memu_upload_files?memu_list_records?memu_match_and_resolve?paper_ingest_pdf?parameter_recommendation?project_proposal_optimize?revise_paper |
| test_full_flow_integration.py | ?? | ???????+ ???? + **??????** |
| test_four_scenarios_full_flow.py | ?? | **????*????????????/???? ?????? ???????????????????/????tests/logs/four_scenarios_*.log |
| test_single_paper_full_flow.py | ?? | **??????**?? 2601.00062v1.pdf ??????????????????PDF ?? docs/ ????|
| test_quantum_physics_three_papers.py | ?? | **????????**??511.00150v1.pdf??601.00062v1.pdf??601.00077v1.pdf ????????????.md/.json ????????????? |
| test_writing_chain.py | app_backend, scientific_writer_client | **??????*?AppBackend.run_paper_generation ??ScientificWriterClient ??scientific_writer?? API key ????????|

## ???????final_project ??????

?? **`python tests/test_four_scenarios_full_flow.py`** ??? **`python tests/test_full_flow_integration.py`** ?????

1. **???**????????agent?? ?????docs/FH_data.csv?prompt.txt?? ?? docs/sample_*.pdf ??????+ ?? + DB??
2. **????*?? query ????normalize_query?? list_jobs?????? generate_paper?????/????
3. **????*?????????? + ?????????????? DASHSCOPE ?? API??
4. **????*?memu_retrieve + memu_match_and_resolve?????????????????

?????? DB/???`database/memu_four_scenarios_test.db`?`memu_storage_four_scenarios_test`????????????????**docs/user_questions_examples.txt**????????????/??/????????agent???

## ????????

- ?? **`merge_project/docs/`** ????`FH_data.csv`?`prompt.txt` ???
- ????????????PDF ????? PDF ??DASHSCOPE_API_KEY????????????????
- ???prompts?tasks?memu_scenarios?? **DESIGN_ARCHITECTURE.md** ??**README_CONFIG.md** ?????agent?physics/chemistry/biology/math/cs/_default?????? task ??prompt ???

## ????

??**merge_project** ??????

```bash
# ????????????? + ???? + ?????????? tests/logs/??
python tests/test_full_flow_integration.py

# ????????????/??/????/??/????
python tests/test_four_scenarios_full_flow.py

# ????????????2601.00062v1.pdf ?? docs/??
python tests/test_single_paper_full_flow.py
# ??????????????????
python tests/run_full_flow_single_paper.py

# ???????????????????PDF ?? data/ ??docs/??
python tests/test_quantum_physics_three_papers.py
# ??
python run_quantum_physics_three_papers.py

# ????????AppBackend ??ScientificWriterClient ??scientific_writer??
python tests/run_writing_verification.py
python -m pytest tests/test_writing_chain.py -v -s

# ????pytest ??????
python -m pytest tests/test_config.py -v -s
python -m pytest tests/test_agent_config.py -v -s
python -m pytest tests/test_memu_client_api.py -v -s
python -m pytest tests/test_app_backend_api.py -v -s

# ??????????
python -m pytest tests/ -v -s
```

## ??????

- ???????? `DebugLogger`??*????**??*??**??*????????/prompt**??*??/??** ????????`tests/logs/<??>_<??>.log`??
- ????????`tests/logs/full_flow_<??>.log`???????????/?????????
- ?????????`tests/logs/four_scenarios_<??>.log`?????????summary ????????????
- ????????????????????????????????????????????????????

## ????????

- **???? / ???? / ????**?? `DASHSCOPE_API_KEY`??????????`_default`????????error???
- **memU ??**?? `MEMU_API_KEY`?`MEMU_BASE_URL`????????????????? OSS???
- **??????/ list_jobs**?? `ANTHROPIC_API_KEY`?ensure_env ?????????? PDF ??????
- ????????**.env.example** ??**ENV_CONFIG.md**??
